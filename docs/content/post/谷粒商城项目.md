+++

title="谷粒商城"
tags=["谷粒商城","项目"]
categories=["谷粒商城","项目"]
date="2020-12-07T12:36:58+08:00"
tocs=true

+++

# 谷粒商城项目日志

摘要：项目整理



## 12/3

### 在docker中安装mysql

我直接用服务器安装docker，省去了vegrent搭建的虚拟环境

docker容器设置自动启动

![image-20201204170727220](https://gitee.com/yiyehub/CND/raw/main/note/image-20201204170727220.png)



mysql的安装

```powershell
> docker run -p 3306:3306 --name mysql -v /mydata/mysql/log:/var/log/mysql -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7
```

![image-20201202123554454](https://gitee.com/excellenthub/img/raw/master/image-20201202123554454.png)

```shell
where is mysql # 可以查看mysql的安装位置
```

### redis的安装

```bash
mkdir -p /mydata/redis/conf
touch /mydata/redis/conf/redis.conf

docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf -d redis redis-server /etc/redis/redis.conf
docker exec -it redis redis-cli # 可以直接使用redis
exit
```

redis持久化 redis.conf 中添加以下命令

```
appendonly yes
```



### maven的安装

基础环境搭建

到官网上下载：[Maven – Download Apache Maven](http://maven.apache.org/download.cgi)

![image-20201204225140865](https://gitee.com/yiyehub/CND/raw/main/image-20201204225140865.png)

环境变量的配置

```
// MAVEN_HOME 配置
D:\Program Files (x86)\apache-maven-3.6.3
// PATH 配置
D:\Program Files (x86)\apache-maven-3.6.3\bin
```



```powershell
java -version # 查看java环境
maven -version # 查看maven版本，检测maven是否安装成功
```

![](https://gitee.com/excellenthub/img/raw/master/image-20201203203926423.png)

配置maven的镜像

```html
<!-- 阿里云仓库 -->
<mirror>
    <id>alimaven</id>
    <mirrorOf>central</mirrorOf>
    <name>aliyun maven</name>
    <url>http://maven.aliyun.com/nexus/content/repositories/central/</url>
</mirror>
```

![image-20201203204132199](https://gitee.com/excellenthub/img/raw/master/image-20201203204132199.png)

设置maven的jdk

```html
<profile>
　　<id>jdk-1.8</id>
　　<activation>
　　　　<activeByDefault>true</activeByDefault>
　　　　<jdk>1.8</jdk>
　　</activation>
　　<properties>
　　　　<maven.compiler.source>1.8</maven.compiler.source>
　　　　<maven.compiler.target>1.8</maven.compiler.target>
　　　　<maven.compiler.compilerVersion>1.8</maven.compiler.compilerVersion>
　　</properties>
</profile>

```

![image-20201203204241583](https://gitee.com/excellenthub/img/raw/master/image-20201203204241583.png)

### idea编译器配置

setting里maven的配置

![image-20201204230533309](http://kodohub.yiye.show/img/image-20201204230533309.png)

安装lombok插件

![image-20201203204532528](https://gitee.com/yiyehub/CND/raw/main/note/image-20201203204532528.png)

安装mybatis插件

![image-20201203204618641](https://gitee.com/yiyehub/CND/raw/main/note/image-20201203204618641.png)

### 下载vscode安装一下插件

```
Auto Close Tag
Auto Rename Tag
Chinese
ESLint
HTML CSS Support
HTmL Snippets
JavaScript(ES6)
Live Server
open in browser
Vetur
```

![image-20201203204959623](https://gitee.com/yiyehub/CND/raw/main/note/image-20201203204959623.png)







### git

下载安装

[Git (git-scm.com)](https://git-scm.com/)

打开bash设置

```
git config --global user.name "自己的账户名"
git config --global user.email " gitee邮箱号 "

可以免密登录
ssh-keygen -t rsa -C " gitee邮箱 "
cat ~/.ssh/id_rsa.pub
ssh -T git@gitee.com

```

### 在gitee创建仓库

| 语言 | 添加.gitignore | 添加开源许可证 |
| ---- | -------------- | -------------- |
| Java | Maven          | Apche-2.0      |

![](https://gitee.com/yiyehub/CND/raw/main/note/image-20201204162439949.png)

将gitee导入IDEA

![image-20201204162629395](https://gitee.com/excellenthub/img/raw/master/image-20201204162629395.png)





![image-20201204162655539](https://gitee.com/excellenthub/img/raw/master/image-20201204162655539.png)





#### 创建项目微服务

![image-20201204163140812](https://gitee.com/excellenthub/img/raw/master/image-20201204163140812.png)

创建moudle

![image-20201204163554316](https://gitee.com/excellenthub/img/raw/master/image-20201204163554316.png)

![image-20201204163746277](https://gitee.com/excellenthub/img/raw/master/image-20201204163746277.png)



商品服务设置

![image-20201204162855192](https://gitee.com/excellenthub/img/raw/master/image-20201204162855192.png)

![image-20201204162932126](https://gitee.com/excellenthub/img/raw/master/image-20201204162932126.png)

![image-20201204162954734](https://gitee.com/excellenthub/img/raw/master/image-20201204162954734.png)

仓储服务

![image-20201204163235953](https://gitee.com/excellenthub/img/raw/master/image-20201204163235953.png)

订单服务

![image-20201204163318104](https://gitee.com/excellenthub/img/raw/master/image-20201204163318104.png)

会员服务

![image-20201204163346439](https://gitee.com/excellenthub/img/raw/master/image-20201204163346439.png)

优惠券服务

![image-20201204163413246](https://gitee.com/excellenthub/img/raw/master/image-20201204163413246.png)



### 把所有的项目聚合

IDEA：项目展示

![image-20201204164054863](https://gitee.com/excellenthub/img/raw/master/image-20201204164054863.png)



复制pom文件把项目聚合

![image-20201204164243451](https://gitee.com/yiyehub/CND/raw/main/note/image-20201204164243451.png)

![image-20201204164348910](https://gitee.com/excellenthub/img/raw/master/image-20201204164348910.png)

修改pom文件里面的内容

```html
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.atguigu.gulimall</groupId>
    <artifactId>gulimall</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>gulimall</name>
    <description>聚合服务</description>
    <modules>
        <module>gulimall-coupon</module>
        <module>gulimall-member</module>
        <module>gulimall-order</module>
        <module>gulimall-product</module>
        <module>gulimall-ware</module>
    </modules>

</project>
```





![image-20201204164654443](https://gitee.com/excellenthub/img/raw/master/image-20201204164654443.png)

### 版本控制

gitignore忽略文件

![image-20201206131729361](https://gitee.com/excellenthub/img/raw/master/image-20201206131729361.png)

纳入版本控制

![image-20201206132613663](https://gitee.com/excellenthub/img/raw/master/image-20201206132613663.png)

安装gitee插件，提交至码云仓库

![image-20201206132943644](https://gitee.com/excellenthub/img/raw/master/image-20201206132943644.png)

数据库导表



![image-20201206133137607](https://gitee.com/excellenthub/img/raw/master/image-20201206133137607.png)



### 在数据库里面添加sql数据库

![image-20201204171337069](https://gitee.com/excellenthub/img/raw/master/image-20201204171337069.png)

![image-20201204171406094](https://gitee.com/excellenthub/img/raw/master/image-20201204171406094.png)

![image-20201204171430327](https://gitee.com/excellenthub/img/raw/master/image-20201204171430327.png)

要把所有的选中后运行

现在遇到的问题： gulimall-wsm执行完命令后啥也没有。//可能会有错

## 12/5



### 添加renren-fast 

添加到pom文件中

**![image-20201206182709924](https://gitee.com/excellenthub/img/raw/master/image-20201206182709924.png)**

![image-20201206182756965](https://gitee.com/excellenthub/img/raw/master/image-20201206182756965.png)

数据库的连接配置

![image-20201206182945478](https://gitee.com/excellenthub/img/raw/master/image-20201206182945478.png)

如果出错的话设置jdk

![image-20201206183114437](https://gitee.com/excellenthub/img/raw/master/image-20201206183114437.png)

![image-20201206183056864](https://gitee.com/excellenthub/img/raw/master/image-20201206183056864.png)





### renren-fast-vue 前端配置

安装nodejs [Node.js](https://nodejs.org/en/)

### 设置npm镜像仓库

```
 npm config set registry http://registry.npm.taobao.org/
```

```
npm install # 安装环境
npm run dev # 运行
```





### 人人代码生成器

配置数据库文件

配置generator.propertties文件

![image-20201207110533787](http://kodohub.yiye.show/img/image-20201207110533787.png)

进去80端口的页面自动生成代码，解压复制main文件到商品服务的文件夹中

![image-20201207112441217](https://gitee.com/excellenthub/img/raw/master/image-20201207112441217.png)

![image-20201207112601944](https://gitee.com/excellenthub/img/raw/master/image-20201207112601944.png)

添加描述

![image-20201207112928220](https://gitee.com/excellenthub/img/raw/master/image-20201207112928220.png)

### 错误的解决

把common项目作为全部项目依赖包

![image-20201207113107479](https://gitee.com/excellenthub/img/raw/master/image-20201207113107479.png)

设置maven导包：mybatis

![image-20201207113755378](https://gitee.com/excellenthub/img/raw/master/image-20201207113755378.png)

![image-20201207113852760](https://gitee.com/excellenthub/img/raw/master/image-20201207113852760.png)

```
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus</artifactId>
    <version>3.4.1</version>
</dependency>
```

成功***********

![image-20201207114438441](https://gitee.com/excellenthub/img/raw/master/image-20201207114438441.png)

lombok

![image-20201207114711198](https://gitee.com/excellenthub/img/raw/master/image-20201207114711198.png)

导入人人的相关依赖工具类：从renren-fast直接粘贴过来

![image-20201207114947425](https://gitee.com/excellenthub/img/raw/master/image-20201207114947425.png)

![image-20201207114908245](https://gitee.com/excellenthub/img/raw/master/image-20201207114908245.png)

![image-20201207115652948](https://gitee.com/excellenthub/img/raw/master/image-20201207115652948.png)

解决common 中的 R 报错问题

导入 httpcomponents依赖

![image-20201207120254683](https://gitee.com/excellenthub/img/raw/master/image-20201207120254683.png)

```
<!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore -->
<dependency>
    <groupId>org.apache.httpcomponents</groupId>
    <artifactId>httpcore</artifactId>
    <version>4.4.14</version>
</dependency>

```

query

common-lang导包

![image-20201207120644077](https://gitee.com/excellenthub/img/raw/master/image-20201207120644077.png)

版本号设置

![image-20201207120611928](https://gitee.com/excellenthub/img/raw/master/image-20201207120611928.png)

完成

![image-20201207121005133](https://gitee.com/excellenthub/img/raw/master/image-20201207121005133.png)





sqlfilter导包

![image-20201207121047170](https://gitee.com/excellenthub/img/raw/master/image-20201207121047170.png)

完成图

![image-20201207121457526](https://gitee.com/excellenthub/img/raw/master/image-20201207121457526.png)

有一个报错的地方： RRException 通过alt+enter解决

从人人开源项目中找到Constant粘贴过来

![image-20201207121952889](https://gitee.com/excellenthub/img/raw/master/image-20201207121952889.png)

![image-20201207122411423](https://gitee.com/excellenthub/img/raw/master/image-20201207122411423.png)

![](https://gitee.com/excellenthub/img/raw/master/image-20201207122241932.png)

